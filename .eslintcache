[{"/home/tom/code/react/lets_pop_to/src/index.tsx":"1","/home/tom/code/react/lets_pop_to/src/App.tsx":"2","/home/tom/code/react/lets_pop_to/src/redux/store.tsx":"3","/home/tom/code/react/lets_pop_to/src/features/navBar/NavBar.tsx":"4","/home/tom/code/react/lets_pop_to/src/features/flights/sampleFlights.tsx":"5","/home/tom/code/react/lets_pop_to/src/features/flights/Flights.tsx":"6","/home/tom/code/react/lets_pop_to/src/features/flights/Flight.tsx":"7","/home/tom/code/react/lets_pop_to/src/helpers/cameliseKeys.ts":"8","/home/tom/code/react/lets_pop_to/src/helpers/formatPrice.ts":"9","/home/tom/code/react/lets_pop_to/src/helpers/parseTime.ts":"10","/home/tom/code/react/lets_pop_to/src/features/flights/Inspire.tsx":"11","/home/tom/code/react/lets_pop_to/src/features/flights/components/StaticCalendar.js":"12","/home/tom/code/react/lets_pop_to/src/features/flights/components/MultiDatePicker.tsx":"13","/home/tom/code/react/lets_pop_to/src/components/MultiDatePicker.tsx":"14","/home/tom/code/react/lets_pop_to/src/features/flights/flightsSlice.ts":"15","/home/tom/code/react/lets_pop_to/src/features/inspireMe/inspireMeSlice.ts":"16","/home/tom/code/react/lets_pop_to/src/features/inspireMe/InspireMe.tsx":"17","/home/tom/code/react/lets_pop_to/src/features/inspireMe/PlaceInput.tsx":"18","/home/tom/code/react/lets_pop_to/src/features/inspireMe/SelectDates.tsx":"19","/home/tom/code/react/lets_pop_to/src/features/footer/Footer.tsx":"20","/home/tom/code/react/lets_pop_to/src/constants/routes.ts":"21","/home/tom/code/react/lets_pop_to/src/features/browseInspiredFlights/BrowseInspiredFlights.tsx":"22","/home/tom/code/react/lets_pop_to/src/features/browseInspiredFlights/FlightCard.tsx":"23","/home/tom/code/react/lets_pop_to/src/features/browseInspiredFlights/DestinationCard.tsx":"24","/home/tom/code/react/lets_pop_to/src/features/browseInspiredFlights/fetchPhoto.ts":"25"},{"size":523,"mtime":1610465581349,"results":"26","hashOfConfig":"27"},{"size":1384,"mtime":1610465573633,"results":"28","hashOfConfig":"27"},{"size":612,"mtime":1610465564445,"results":"29","hashOfConfig":"27"},{"size":1758,"mtime":1610465522937,"results":"30","hashOfConfig":"27"},{"size":1515,"mtime":1608641051534,"results":"31","hashOfConfig":"27"},{"size":1253,"mtime":1609846499826,"results":"32","hashOfConfig":"27"},{"size":3513,"mtime":1609846286300,"results":"33","hashOfConfig":"27"},{"size":453,"mtime":1608654860198,"results":"34","hashOfConfig":"27"},{"size":1621,"mtime":1609263537154,"results":"35","hashOfConfig":"27"},{"size":1301,"mtime":1609252367834,"results":"36","hashOfConfig":"27"},{"size":3917,"mtime":1609871824522,"results":"37","hashOfConfig":"27"},{"size":627,"mtime":1609850621690,"results":"38","hashOfConfig":"27"},{"size":3106,"mtime":1609871720000,"results":"39","hashOfConfig":"27"},{"size":3034,"mtime":1610465334140,"results":"40","hashOfConfig":"27"},{"size":1968,"mtime":1610465452490,"results":"41","hashOfConfig":"27"},{"size":577,"mtime":1610465501590,"results":"42","hashOfConfig":"27"},{"size":2377,"mtime":1610465501590,"results":"43","hashOfConfig":"27"},{"size":3306,"mtime":1610465501590,"results":"44","hashOfConfig":"27"},{"size":1578,"mtime":1610465501590,"results":"45","hashOfConfig":"27"},{"size":1219,"mtime":1610465483830,"results":"46","hashOfConfig":"27"},{"size":82,"mtime":1610465351211,"results":"47","hashOfConfig":"27"},{"size":3229,"mtime":1610473649966,"results":"48","hashOfConfig":"27"},{"size":675,"mtime":1610135674248,"results":"49","hashOfConfig":"27"},{"size":1868,"mtime":1610554335329,"results":"50","hashOfConfig":"27"},{"size":788,"mtime":1610555898720,"results":"51","hashOfConfig":"27"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},"xpxue0",{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"80"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"54"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"104"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"107","usedDeprecatedRules":"54"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/tom/code/react/lets_pop_to/src/index.tsx",[],["110","111"],"/home/tom/code/react/lets_pop_to/src/App.tsx",[],"/home/tom/code/react/lets_pop_to/src/redux/store.tsx",[],"/home/tom/code/react/lets_pop_to/src/features/navBar/NavBar.tsx",[],"/home/tom/code/react/lets_pop_to/src/features/flights/sampleFlights.tsx",[],["112","113"],"/home/tom/code/react/lets_pop_to/src/features/flights/Flights.tsx",[],["114","115"],"/home/tom/code/react/lets_pop_to/src/features/flights/Flight.tsx",[],"/home/tom/code/react/lets_pop_to/src/helpers/cameliseKeys.ts",[],["116","117"],"/home/tom/code/react/lets_pop_to/src/helpers/formatPrice.ts",[],"/home/tom/code/react/lets_pop_to/src/helpers/parseTime.ts",[],"/home/tom/code/react/lets_pop_to/src/features/flights/Inspire.tsx",[],"/home/tom/code/react/lets_pop_to/src/features/flights/components/StaticCalendar.js",[],["118","119"],"/home/tom/code/react/lets_pop_to/src/features/flights/components/MultiDatePicker.tsx",[],"/home/tom/code/react/lets_pop_to/src/components/MultiDatePicker.tsx",[],"/home/tom/code/react/lets_pop_to/src/features/flights/flightsSlice.ts",[],"/home/tom/code/react/lets_pop_to/src/features/inspireMe/inspireMeSlice.ts",[],"/home/tom/code/react/lets_pop_to/src/features/inspireMe/InspireMe.tsx",[],"/home/tom/code/react/lets_pop_to/src/features/inspireMe/PlaceInput.tsx",[],"/home/tom/code/react/lets_pop_to/src/features/inspireMe/SelectDates.tsx",[],"/home/tom/code/react/lets_pop_to/src/features/footer/Footer.tsx",[],"/home/tom/code/react/lets_pop_to/src/constants/routes.ts",[],"/home/tom/code/react/lets_pop_to/src/features/browseInspiredFlights/BrowseInspiredFlights.tsx",["120"],"import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport axios, { AxiosRequestConfig } from 'axios';\nimport { Container, Typography } from '@material-ui/core';\n\nimport { RootState } from '../../redux/store';\nimport { InspireMeStateType } from '../../type';\nimport { DestinationCard } from './DestinationCard';\n\nconst BrowseInspiredFlights: React.FC = () => {\n  const { from, dates }: InspireMeStateType = useSelector(\n    (state: RootState) => state.inspireMe\n  );\n\n  const [loading, setLoading] = useState<boolean>(true);\n  const [destinations, setDestinations] = useState<any>({});\n  const [sortedDestinations, setSortedDestinations] = useState<any[]>([]);\n\n  const fetchFlights = async () => {\n    try {\n      // setLoading(true);\n      const url = `https://europe-west1-lets-pop-to-dev.cloudfunctions.net/fetchInspireDestinations?from=${JSON.stringify(\n        from\n      )}&dates=${JSON.stringify(dates)}`;\n      setLoading(true);\n      const fetchInspiredFlightsOptions: AxiosRequestConfig = {\n        method: 'GET',\n        url: url,\n        headers: {\n          'Allow-Control-Allow-Origin': '*',\n        },\n      };\n      // const response = await axios.get(url);\n      const response = await axios.request(fetchInspiredFlightsOptions);\n      console.log(response);\n      const flightsResponse: any = response.data;\n\n      if (flightsResponse.data) {\n        setDestinations(flightsResponse.data);\n      }\n      if (Array.isArray(flightsResponse.sortedByPrice)) {\n        setSortedDestinations(flightsResponse.sortedByPrice);\n      }\n      setLoading(false);\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchFlights();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const renderFlights = () => {\n    if (!loading && destinations && sortedDestinations.length) {\n      console.log(destinations[sortedDestinations[0].destination]);\n      // const flightDivs = flights.map((flight, idx) => {\n      //   return (\n      //     <div style={{ marginBottom: '1em' }}>\n      //       <FlightCard key={`flight#${idx}`} {...flight} />\n      //     </div>\n      //   );\n      // });\n      // console.log('displaying flights');\n      // return flightDivs;\n      // return (\n      //   <div style={{ marginBottom: '1em' }}>\n      //     <FlightCard key={`flight#${1}`} {...destinations[0]} />\n      //   </div>\n      // );\n      return (\n        <>\n          {sortedDestinations.map(({ destination, cost }, index) => {\n            if (index < 10) {\n              return (\n                <DestinationCard\n                  key={destination}\n                  {...destinations[destination]}\n                  timeoutR={index}\n                />\n              );\n            }\n          })}\n          {/* <DestinationCard\n            key={sortedDestinations[0]}\n            {...destinations[sortedDestinations[0].destination]}\n          /> */}\n        </>\n      );\n    }\n\n    return <div>No flights</div>;\n  };\n\n  return (\n    <Container>\n      <Typography variant=\"h4\">Browse inspired flights</Typography>\n      <Container>{renderFlights()}</Container>\n    </Container>\n  );\n};\n\nexport default BrowseInspiredFlights;\n","/home/tom/code/react/lets_pop_to/src/features/browseInspiredFlights/FlightCard.tsx",[],["121","122"],"/home/tom/code/react/lets_pop_to/src/features/browseInspiredFlights/DestinationCard.tsx",["123"],"import React, { useEffect, useState } from 'react';\nimport { Paper, Typography } from '@material-ui/core';\nimport { fetchPhoto } from './fetchPhoto';\n\ninterface DestinationCardPropTypes {\n  place: any;\n  weather: any;\n  flights: any;\n  timeoutR: number;\n}\n\nconst timeout = (ms: number): Promise<void> => {\n  const delay = ms * 100;\n  return new Promise((resolve) => setTimeout(resolve, delay));\n};\n\nexport const DestinationCard = ({\n  place,\n  weather,\n  flights,\n  timeoutR,\n}: DestinationCardPropTypes) => {\n  const [loading, setLoading] = useState<boolean>(true);\n  const [photo, setPhoto] = useState<string>('');\n\n  useEffect(() => {\n    const isSubscribed = true;\n    const cityName = place.cityName;\n\n    setLoading(true);\n\n    const getPhoto = async (cityName: string) => {\n      await timeout(timeoutR);\n      const photoB64 = await fetchPhoto(cityName);\n      if (isSubscribed) {\n        if (photoB64) {\n          setPhoto(photoB64);\n          setLoading(false);\n        }\n      }\n    };\n\n    getPhoto(cityName);\n    return;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    let isSubscribed = true;\n\n    setTimeout((isSubscribed = true) => {\n      if (isSubscribed) {\n        setLoading(false);\n      }\n    }, 1000);\n\n    // prettier-ignore\n    return () => {isSubscribed = false}\n  }, []);\n\n  const renderImage = () => {\n    if (photo) {\n      return (\n        <img\n          alt={`${place.cityName}`}\n          src={`data:image/jpeg;base64,${photo}`}\n        />\n      );\n    }\n  };\n\n  return (\n    <>\n      <Paper>\n        <Typography>Flight</Typography>\n        loading: {JSON.stringify(loading)}\n        {renderImage()}\n      </Paper>\n      <div>\n        <pre>{JSON.stringify(place)}</pre>\n        <pre>{JSON.stringify(weather)}</pre>\n        <pre>{JSON.stringify(flights)}</pre>\n      </div>\n    </>\n  );\n};\n","/home/tom/code/react/lets_pop_to/src/features/browseInspiredFlights/fetchPhoto.ts",[],{"ruleId":"124","replacedBy":"125"},{"ruleId":"126","replacedBy":"127"},{"ruleId":"124","replacedBy":"128"},{"ruleId":"126","replacedBy":"129"},{"ruleId":"124","replacedBy":"130"},{"ruleId":"126","replacedBy":"131"},{"ruleId":"124","replacedBy":"132"},{"ruleId":"126","replacedBy":"133"},{"ruleId":"124","replacedBy":"130"},{"ruleId":"126","replacedBy":"131"},{"ruleId":"134","severity":1,"message":"135","line":74,"column":66,"nodeType":"136","messageId":"137","endLine":74,"endColumn":68},{"ruleId":"124","replacedBy":"138"},{"ruleId":"126","replacedBy":"139"},{"ruleId":"140","severity":1,"message":"141","line":58,"column":19,"nodeType":"142","messageId":"143","endLine":58,"endColumn":31},"no-native-reassign",["144"],"no-negated-in-lhs",["145"],["144"],["145"],["144"],["145"],["144"],["145"],"array-callback-return","Array.prototype.map() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd",["144"],["145"],"@typescript-eslint/no-unused-vars","'isSubscribed' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]